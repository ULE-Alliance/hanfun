<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>HAN-FUN API: Attribute Reporting (advanced)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ule-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">HAN-FUN API
   &#160;<span id="projectnumber">1.2.2</span>
   </div>
   <div id="projectbrief">This project provides the common implementation of ULE Alliance&#39;s HAN-FUN application protocol.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('example_07.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Attribute Reporting (advanced) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example takes the code presented for <a class="el" href="example_05.html">Level Control interface</a>, to demostrate Attribute Reporting service.</p>
<p>We have two nodes, one with the Level Control server side where the attribute reporting rule will be created. And another with the Level Control client side that will issue commands to change the level on the server and received the attribute reporting notifications.</p>
<p>For the server side the code is the same as before.</p>
 <div class="fragment"><div class="line">   <span class="keyword">struct </span>SimpleLevelControllable:<span class="keyword">public</span> <a class="code" href="classHF_1_1Units_1_1Unit.html">HF::Units::Unit</a> &lt;HF::Profiles::SimpleLevelControllable&gt;</div>
<div class="line">   {</div>
<div class="line">      <span class="keyword">typedef</span> <a class="code" href="classHF_1_1Units_1_1Unit.html">HF::Units::Unit &lt;HF::Profiles::SimpleLevelControllable&gt;</a> _Parent;</div>
<div class="line"></div>
<div class="line">      SimpleLevelControllable(uint8_t <span class="keywordtype">id</span>, <a class="code" href="structHF_1_1IDevice.html">HF::IDevice</a> &amp;device):</div>
<div class="line">         _Parent (id, device)</div>
<div class="line">      {}</div>
<div class="line"></div>
<div class="line">      <span class="keywordtype">void</span> level_change (<a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;source, uint8_t old_level, uint8_t new_level)</div>
<div class="line">      {</div>
<div class="line">         _Parent::level_change (source, old_level, new_level);</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Level Change : &quot;</span></div>
<div class="line">                    &lt;&lt; (int) <a class="code" href="group__common.html#ga48196ead67669d489f7a8a6559b8b15a">HF::Common::to_percent</a> (old_level)</div>
<div class="line">                    &lt;&lt; <span class="stringliteral">&quot;\% -&gt; &quot;</span></div>
<div class="line">                    &lt;&lt; (int) <a class="code" href="group__common.html#ga48196ead67669d489f7a8a6559b8b15a">HF::Common::to_percent</a> (new_level)</div>
<div class="line">                    &lt;&lt; <span class="stringliteral">&quot;\%&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">      }</div>
<div class="line">   };</div>
</div><!-- fragment --></p>
<p>For the client side the code is almost the same execpt that the unit now has also an optional interface to receive the attribute reporting events.</p>
 <div class="fragment"><div class="line">   <span class="keyword">struct </span>SimpleLevelControl:<span class="keyword">public</span> <a class="code" href="classHF_1_1Units_1_1Unit.html">HF::Units::Unit</a> &lt;HF::Profiles::SimpleLevelControl, AttributeReporting&gt;</div>
<div class="line">   {</div>
<div class="line">      SimpleLevelControl(uint8_t <span class="keywordtype">id</span>, <a class="code" href="structHF_1_1IDevice.html">HF::IDevice</a> &amp;device):</div>
<div class="line">         <a class="code" href="namespaceHF.html">HF</a>::Units::Unit &lt;<a class="code" href="namespaceHF.html">HF</a>::Profiles::SimpleLevelControl, AttributeReporting&gt;(id, device)</div>
<div class="line">      {}</div>
<div class="line"></div>
<div class="line">      AttributeReporting *attribute_reporting ()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">      </span>{</div>
<div class="line">         <span class="keywordflow">return</span> const_cast &lt;AttributeReporting *&gt;(get &lt;0&gt;());</div>
<div class="line">      }</div>
<div class="line">   };</div>
</div><!-- fragment --></p>
<p>The AttributeReporting class used to receive the attribute reporting events. It looks big but is essentially only printing the data in the events received.</p>
 <div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceHF_1_1Core_1_1AttributeReporting.html">HF::Core::AttributeReporting</a>;</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> Report::Attribute &amp;attr)</div>
<div class="line">{</div>
<div class="line">   stream &lt;&lt; <span class="stringliteral">&quot; (idx) &quot;</span> &lt;&lt; attr-&gt;interface () &lt;&lt; <span class="stringliteral">&quot; (itf) &quot;</span> &lt;&lt; (int) attr-&gt;uid () &lt;&lt; <span class="stringliteral">&quot; (uid)&quot;</span>;</div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> Report::Periodic::Entry &amp;entry)</div>
<div class="line">{</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;ITF : &quot;</span> &lt;&lt; entry.itf.id &lt;&lt; <span class="stringliteral">&quot; (uid) &quot;</span> &lt;&lt; entry.itf.role &lt;&lt; <span class="stringliteral">&quot; (role)&quot;</span>) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Unit : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.unit) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Attributes : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.attributes.size () &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> Report::Event::Entry &amp;entry)</div>
<div class="line">{</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;ITF : &quot;</span> &lt;&lt; entry.itf.id &lt;&lt; <span class="stringliteral">&quot; (uid) &quot;</span> &lt;&lt; entry.itf.role &lt;&lt; <span class="stringliteral">&quot; (role)&quot;</span>) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Unit : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.unit) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Fields : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.fields.size () &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> Report::Event::Field &amp;field)</div>
<div class="line">{</div>
<div class="line">   stream &lt;&lt; <span class="stringliteral">&quot; (idx) &quot;</span> &lt;&lt; field.type &lt;&lt; <span class="stringliteral">&quot; (type) &quot;</span>;</div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> Report::Abstract &amp;report)</div>
<div class="line">{</div>
<div class="line">   stream &lt;&lt; (int) report.id &lt;&lt; <span class="stringliteral">&quot; (id) &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) report.type &lt;&lt; <span class="stringliteral">&quot; (type) &quot;</span>;</div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace</span></div>
<div class="line">{</div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Custom attribute reporting client role implementation.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <span class="keyword">struct </span>AttributeReporting:<span class="keyword">public</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1AbstractClient.html">HF::Core::AttributeReporting::AbstractClient</a></div>
<div class="line">   {</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Client.html#a5989c1c03f5bd1cc7086fa79e0242aeb">report</a> (<a class="code" href="group__attr__reporting__common.html#ga5dee0ba2828750575a162474b07772dd">HF::Core::AttributeReporting::Type</a> type, <span class="keyword">const</span> <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;address,</div>
<div class="line">                   <span class="keyword">const</span> <a class="code" href="structHF_1_1Common_1_1ByteArray.html">HF::Common::ByteArray</a> &amp;payload, uint16_t offset)</div>
<div class="line">      {</div>
<div class="line">         <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (payload);</div>
<div class="line">         <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (offset);</div>
<div class="line"></div>
<div class="line">         <span class="keyword">using namespace </span><a class="code" href="namespaceHF_1_1Core_1_1AttributeReporting.html">HF::Core::AttributeReporting</a>;</div>
<div class="line"></div>
<div class="line">         <span class="keywordflow">switch</span> (type)</div>
<div class="line">         {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda488fa3a02b292a4782f38008f26dc249">PERIODIC</a>:</div>
<div class="line">            {</div>
<div class="line">               <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Received a periodic notification from device : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">               <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html">Report::Periodic</a> report;</div>
<div class="line"></div>
<div class="line">               report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#ac45448b757a46d499b1726d544d69ee7">unpack</a> (<a class="code" href="group__attributes.html#gae271ba996fe0d158397877c944e55862">HF::Attributes::get_factory</a>, payload, offset);</div>
<div class="line"></div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Report : &quot;</span> &lt;&lt; report);</div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Entries : &quot;</span> &lt;&lt; std::distance (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.begin (),</div>
<div class="line">                                                         report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.end ()) &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">               uint8_t unit_count = 0;</div>
<div class="line">               <span class="comment">/* *INDENT-OFF* */</span></div>
<div class="line">               std::for_each (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.begin (), report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.end (),</div>
<div class="line">                     [&amp;unit_count](<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic_1_1Entry.html">Report::Periodic::Entry</a> &amp;entry)</div>
<div class="line">               {</div>
<div class="line">                  TABLE_LOG (<span class="stringliteral">&quot;Entry : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) unit_count++ &lt;&lt; std::endl &lt;&lt; entry);</div>
<div class="line"></div>
<div class="line">                  uint8_t attr_count = 0;</div>
<div class="line">                  std::for_each (entry.attributes.begin (), entry.attributes.end (),</div>
<div class="line">                        [&amp;attr_count](Report::Attribute attr)</div>
<div class="line">                  {</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Attribute : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) attr_count++ &lt;&lt; attr);</div>
<div class="line"></div>
<div class="line">                     <span class="keywordflow">if</span> (attr-&gt;interface () == <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a> &amp;&amp;</div>
<div class="line">                           attr-&gt;uid () == <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>)</div>
<div class="line">                     {</div>
<div class="line">                        <a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *level_attr =</div>
<div class="line">                        (<a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *) attr.get ();</div>
<div class="line">                        <span class="keywordtype">int</span> precent = HF::Common::to_percent &lt;uint8_t&gt;(level_attr-&gt;get ());</div>
<div class="line">                        TABLE_LOG (<span class="stringliteral">&quot;Attr Value : &quot;</span> &lt;&lt; precent &lt;&lt; <span class="stringliteral">&quot;%&quot;</span>);</div>
<div class="line">                     }</div>
<div class="line">                  });</div>
<div class="line">               });</div>
<div class="line">               <span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda527a7a9787feeac60996883297a97856">EVENT</a>:</div>
<div class="line">            {</div>
<div class="line">               <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Received an event notification : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">               <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html">Report::Event</a> report;</div>
<div class="line"></div>
<div class="line">               report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#a4f014654d2ce96c28c3d37330ff36477">unpack</a> (<a class="code" href="group__attributes.html#gae271ba996fe0d158397877c944e55862">HF::Attributes::get_factory</a>, payload, offset);</div>
<div class="line"></div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Report : &quot;</span> &lt;&lt; report);</div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Entries : &quot;</span> &lt;&lt; std::distance (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.begin (),</div>
<div class="line">                                                         report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.end ()) &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">               uint8_t unit_count = 0;</div>
<div class="line">               <span class="comment">/* *INDENT-OFF* */</span></div>
<div class="line">               std::for_each (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.begin (), report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.end (),</div>
<div class="line">                     [&amp;unit_count](<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Entry.html">Report::Event::Entry</a> &amp;entry)</div>
<div class="line">               {</div>
<div class="line">                  TABLE_LOG (<span class="stringliteral">&quot;Entry : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) unit_count++ &lt;&lt; std::endl &lt;&lt; entry);</div>
<div class="line"></div>
<div class="line">                  uint8_t field_count = 0;</div>
<div class="line">                  std::for_each (entry.fields.begin (), entry.fields.end (),</div>
<div class="line">                        [&amp;field_count](<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Field.html">Report::Event::Field</a> &amp;field)</div>
<div class="line">                  {</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Field : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) field_count++ &lt;&lt; field);</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Attribute : &quot;</span> &lt;&lt; field.attribute-&gt;interface () &lt;&lt; <span class="stringliteral">&quot; (itf) &quot;</span></div>
<div class="line">                                                &lt;&lt; (int) field.attribute-&gt;uid () &lt;&lt; <span class="stringliteral">&quot; (uid)&quot;</span>);</div>
<div class="line"></div>
<div class="line">                     <span class="keywordflow">if</span> (field.attribute-&gt;interface () == <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a> &amp;&amp;</div>
<div class="line">                           field.attribute-&gt;uid () == <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>)</div>
<div class="line">                     {</div>
<div class="line">                        <a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *level_attr =</div>
<div class="line">                        (<a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *) field.attribute.get ();</div>
<div class="line">                        <span class="keywordtype">int</span> precent = HF::Common::to_percent &lt;uint8_t&gt;(level_attr-&gt;get ());</div>
<div class="line">                        TABLE_LOG (<span class="stringliteral">&quot;Attr Value : &quot;</span> &lt;&lt; precent &lt;&lt; <span class="stringliteral">&quot;%&quot;</span>);</div>
<div class="line">                     }</div>
<div class="line">                  });</div>
<div class="line">               });</div>
<div class="line">               <span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">         }</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Client.html#af85f53eba92d89256c663e06224aca10">created</a> (<span class="keyword">const</span> <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;address,</div>
<div class="line">                    <span class="keyword">const</span> HF::Core::AttributeReporting::Response &amp;<a class="code" href="group__protocol.html#gaee9a7a9160cb9b4b920ec76aeb89f176">response</a>)</div>
<div class="line">      {</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Report rule created on device : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Code : &quot;</span> &lt;&lt; (int) response.code &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Type : &quot;</span> &lt;&lt; (int) response.report.type &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Id   : &quot;</span> &lt;&lt; (int) response.report.id &lt;&lt; NL;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Client.html#a1ea11894227502493105ece20b113195">added</a> (<span class="keyword">const</span> <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;address,</div>
<div class="line">                  <span class="keyword">const</span> HF::Core::AttributeReporting::Response &amp;response)</div>
<div class="line">      {</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Report rule entries created on device : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Code : &quot;</span> &lt;&lt; (int) response.code &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Type : &quot;</span> &lt;&lt; (int) response.report.type &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Id   : &quot;</span> &lt;&lt; (int) response.report.id &lt;&lt; NL;</div>
<div class="line">      }</div>
<div class="line">   };</div>
</div><!-- fragment --></p>
<p>The attribute reporting service has to types of reports periodic or due to some event, i.e., the value is equal/greater/lesser that another value or has change by a given precentage.</p>
<p>The periodic reports are processed by the code.</p>
<div class="fragment"><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda488fa3a02b292a4782f38008f26dc249">PERIODIC</a>:</div>
<div class="line">            {</div>
<div class="line">               <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Received a periodic notification from device : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">               Report::Periodic report;</div>
<div class="line"></div>
<div class="line">               report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#a4f014654d2ce96c28c3d37330ff36477">unpack</a> (<a class="code" href="group__attributes.html#gae271ba996fe0d158397877c944e55862">HF::Attributes::get_factory</a>, payload, offset);</div>
<div class="line"></div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Report : &quot;</span> &lt;&lt; report);</div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Entries : &quot;</span> &lt;&lt; std::distance (report.entries.begin (),</div>
<div class="line">                                                         report.entries.end ()) &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">               uint8_t unit_count = 0;</div>
<div class="line">               <span class="comment">/* *INDENT-OFF* */</span></div>
<div class="line">               std::for_each (report.entries.begin (), report.entries.end (),</div>
<div class="line">                     [&amp;unit_count](Report::Periodic::Entry &amp;entry)</div>
<div class="line">               {</div>
<div class="line">                  TABLE_LOG (<span class="stringliteral">&quot;Entry : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) unit_count++ &lt;&lt; std::endl &lt;&lt; entry);</div>
<div class="line"></div>
<div class="line">                  uint8_t attr_count = 0;</div>
<div class="line">                  std::for_each (entry.attributes.begin (), entry.attributes.end (),</div>
<div class="line">                        [&amp;attr_count](Report::Attribute attr)</div>
<div class="line">                  {</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Attribute : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) attr_count++ &lt;&lt; attr);</div>
<div class="line"></div>
<div class="line">                     <span class="keywordflow">if</span> (attr-&gt;interface () == <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a> &amp;&amp;</div>
<div class="line">                           attr-&gt;uid () == <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>)</div>
<div class="line">                     {</div>
<div class="line">                        <a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *level_attr =</div>
<div class="line">                        (<a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *) attr.get ();</div>
<div class="line">                        <span class="keywordtype">int</span> precent = HF::Common::to_percent &lt;uint8_t&gt;(level_attr-&gt;get ());</div>
<div class="line">                        TABLE_LOG (<span class="stringliteral">&quot;Attr Value : &quot;</span> &lt;&lt; precent &lt;&lt; <span class="stringliteral">&quot;%&quot;</span>);</div>
<div class="line">                     }</div>
<div class="line">                  });</div>
<div class="line">               });</div>
<div class="line">               <span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
</div><!-- fragment --><p> And the event reports by this code.</p>
<div class="fragment"><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda527a7a9787feeac60996883297a97856">EVENT</a>:</div>
<div class="line">            {</div>
<div class="line">               <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Received an event notification : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">               Report::Event report;</div>
<div class="line"></div>
<div class="line">               report.unpack (<a class="code" href="group__attributes.html#gae271ba996fe0d158397877c944e55862">HF::Attributes::get_factory</a>, payload, offset);</div>
<div class="line"></div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Report : &quot;</span> &lt;&lt; report);</div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Entries : &quot;</span> &lt;&lt; std::distance (report.entries.begin (),</div>
<div class="line">                                                         report.entries.end ()) &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">               uint8_t unit_count = 0;</div>
<div class="line">               <span class="comment">/* *INDENT-OFF* */</span></div>
<div class="line">               std::for_each (report.entries.begin (), report.entries.end (),</div>
<div class="line">                     [&amp;unit_count](Report::Event::Entry &amp;entry)</div>
<div class="line">               {</div>
<div class="line">                  TABLE_LOG (<span class="stringliteral">&quot;Entry : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) unit_count++ &lt;&lt; std::endl &lt;&lt; entry);</div>
<div class="line"></div>
<div class="line">                  uint8_t field_count = 0;</div>
<div class="line">                  std::for_each (entry.fields.begin (), entry.fields.end (),</div>
<div class="line">                        [&amp;field_count](Report::Event::Field &amp;field)</div>
<div class="line">                  {</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Field : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) field_count++ &lt;&lt; field);</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Attribute : &quot;</span> &lt;&lt; field.attribute-&gt;interface () &lt;&lt; <span class="stringliteral">&quot; (itf) &quot;</span></div>
<div class="line">                                                &lt;&lt; (int) field.attribute-&gt;uid () &lt;&lt; <span class="stringliteral">&quot; (uid)&quot;</span>);</div>
<div class="line"></div>
<div class="line">                     <span class="keywordflow">if</span> (field.attribute-&gt;interface () == <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a> &amp;&amp;</div>
<div class="line">                           field.attribute-&gt;uid () == <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>)</div>
<div class="line">                     {</div>
<div class="line">                        <a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *level_attr =</div>
<div class="line">                        (<a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *) field.attribute.get ();</div>
<div class="line">                        <span class="keywordtype">int</span> precent = HF::Common::to_percent &lt;uint8_t&gt;(level_attr-&gt;get ());</div>
<div class="line">                        TABLE_LOG (<span class="stringliteral">&quot;Attr Value : &quot;</span> &lt;&lt; precent &lt;&lt; <span class="stringliteral">&quot;%&quot;</span>);</div>
<div class="line">                     }</div>
<div class="line">                  });</div>
<div class="line">               });</div>
<div class="line">               <span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
</div><!-- fragment --><p> We start by the normal setup for the examples.</p>
 <div class="fragment"><div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (argc);</div>
<div class="line">   <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (argv);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Use case : Level Control interface usage&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Each node variable is a remote device, i.e.,</span></div>
<div class="line"><span class="comment">    * the Node variables are declared on the remote device</span></div>
<div class="line"><span class="comment">    * code and are not used on the base code.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Create the node instances ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   Node node1;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Add unit to node1 instance ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   SimpleLevelControl level_control (1, node1);</div>
<div class="line"></div>
<div class="line">   Node node2;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Add unit to node2 instance ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   SimpleLevelControllable level_controllable (1, node2);</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * This instance represents the base application.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Create the base instance ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   <a class="code" href="structBase.html">Base</a> base;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Create transport instance&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   Localloop loop;</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Setup the network.</span></div>
<div class="line"><span class="comment">    *</span></div>
<div class="line"><span class="comment">    * This simulates the devices connecting to the base using for</span></div>
<div class="line"><span class="comment">    * example a TCP/IP connection or a DECT ULE PVC.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Network setup ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   loop.set_base (&amp;base);</div>
<div class="line">   loop.add_node (&amp;node1, <span class="stringliteral">&quot;node_1&quot;</span>);</div>
<div class="line">   loop.add_node (&amp;node2, <span class="stringliteral">&quot;node_2&quot;</span>);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Register the two devices.</span></div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 1 is unregistered.</span></div>
<div class="line">   assert (node1.address () == <a class="code" href="group__protocol.html#ga23f7a5fde66435071c5d332e9d3dbf0f">HF::Protocol::BROADCAST_ADDR</a>);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Registering node1 ... &quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   node1.unit0 ()-&gt;device_management ()-&gt;register_device ();</div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Node1 address ... &quot;</span> &lt;&lt; node1.address () &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 1 is registered</span></div>
<div class="line">   assert (node1.address () == 1);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 2 is unregistered.</span></div>
<div class="line">   assert (node2.address () == <a class="code" href="group__protocol.html#ga23f7a5fde66435071c5d332e9d3dbf0f">HF::Protocol::BROADCAST_ADDR</a>);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Registering node2 ... &quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   node2.unit0 ()-&gt;device_management ()-&gt;register_device ();</div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Node2 address ... &quot;</span> &lt;&lt; node2.address () &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 2 is registered</span></div>
<div class="line">   assert (node2.address () == 2);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;There should be two registered devices ... &quot;</span></div>
<div class="line">              &lt;&lt; base.<a class="code" href="classHF_1_1Devices_1_1Concentrator_1_1Abstract.html#a2cb2098ad66f441fe4c9eb6a376007af">unit0</a> ()-&gt;device_management ()-&gt;entries ().size () &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   assert (base.<a class="code" href="classHF_1_1Devices_1_1Concentrator_1_1Abstract.html#a2cb2098ad66f441fe4c9eb6a376007af">unit0</a> ()-&gt;device_management ()-&gt;entries ().size () == 2);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Set initial level value ... 15\%&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_controllable.level (15.0f);</div>
</div><!-- fragment --></p>
<h1><a class="anchor" id="periodic"></a>
Periodic Reports</h1>
<p>We create two rules, one to send a report every 6 seconds</p>
<p><div class="fragment"><div class="line">   <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> addr (2, 0);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// =============================================================================</span></div>
<div class="line">   <span class="comment">// Periodic Notification</span></div>
<div class="line">   <span class="comment">// =============================================================================</span></div>
<div class="line"></div>
<div class="line">   <span class="keyword">using namespace </span><a class="code" href="namespaceHF_1_1Core_1_1AttributeReporting.html">HF::Core::AttributeReporting</a>;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;====== Periodic Notifications ======&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create a periodic rule.</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;create (addr, 6);</div>
</div><!-- fragment --></p>
<p>and the other for a report every 15 seconds.</p>
<p><div class="fragment"><div class="line">   level_control.attribute_reporting ()-&gt;create (addr, 15);</div>
</div><!-- fragment --></p>
<p>We then add an entry to each rule so that the report sends the mandatory attributes for the Level Control server side, i.e., the level value.</p>
<p><div class="fragment"><div class="line">   std::vector &lt;Periodic::Entry&gt; periodic_entries (1);</div>
<div class="line"></div>
<div class="line">   <span class="keyword">auto</span> &amp;entry = periodic_entries.front ();</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create an entry to receive all mandatory attributes.</span></div>
<div class="line">   entry.unit     = 1;</div>
<div class="line">   entry.itf.id   = <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a>;</div>
<div class="line">   entry.itf.role = <a class="code" href="group__common__itf.html#gga4e33516b1110eb20d58eeb686910e391a0828ec0ce7413f540a543ab6fe6793ba">HF::Interface::SERVER_ROLE</a>;</div>
<div class="line">   entry.pack_id  = <a class="code" href="group__attr__packs.html#gga7416e0f463a659369c8e567da16a3598aa981953e69372a802cf9dfe12b492627">HF::Attributes::Pack::MANDATORY</a>;</div>
<div class="line"></div>
<div class="line">   Reference report_ref (<a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda488fa3a02b292a4782f38008f26dc249">PERIODIC</a>, 1);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 1</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, report_ref, periodic_entries.begin (),</div>
<div class="line">                                              periodic_entries.end ());</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 2</span></div>
<div class="line">   report_ref.id = 2;</div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, report_ref, periodic_entries.begin (),</div>
<div class="line">                                              periodic_entries.end ());</div>
</div><!-- fragment --></p>
<p>Now we simulate the passage of time in the remote device.</p>
<p><div class="fragment"><div class="line">   <span class="comment">// Simulate remote device HAN-FUN periodic processing.</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;&gt;&gt;&gt; Simulate node periodic processing &lt;&lt;&lt;&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> time = 0; time &lt; 35; time++)</div>
<div class="line">   {</div>
<div class="line">      <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Time : &quot;</span> &lt;&lt; time &lt;&lt; <span class="stringliteral">&quot;s&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">      node2.periodic (time);</div>
</div><!-- fragment --></p>
<p>At 10 seconds a remote node changes the level value</p>
<p><div class="fragment"><div class="line">      <span class="keywordflow">if</span> (time == 10)</div>
<div class="line">      {</div>
<div class="line">         <span class="comment">// Another node changes the value.</span></div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Level changes to 25 % by an another node.&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> addr (node2.address (), 1);</div>
<div class="line">         level_control.level (addr, 25.0f);</div>
<div class="line">      }</div>
</div><!-- fragment --></p>
<p>and at 25 seconds the level is change in the actual device.</p>
<p><div class="fragment"><div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (time == 25)</div>
<div class="line">      {</div>
<div class="line">         <span class="comment">// The value is changed on the actual node.</span></div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Level changes to 55 % on the actual node.&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         level_controllable.level (55.0f);</div>
<div class="line">      }</div>
<div class="line">   }</div>
</div><!-- fragment --></p>
<h1><a class="anchor" id="event"></a>
Event Reports</h1>
<p>Again we create two rules.</p>
<p><div class="fragment"><div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;====== Event Notifications ======&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Set initial level value ... 15\%&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_controllable.level (15.0f);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create a periodic rule.</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;create (addr);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create another periodic rule.</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;create (addr);</div>
</div><!-- fragment --></p>
<p>For the first entry we create the following events.</p>
<p><div class="fragment"><div class="line">   std::vector &lt;Event::Entry&gt; event_entries;</div>
<div class="line"></div>
<div class="line">   Event::Entry evt_entry;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create an entry to receive changes on .</span></div>
<div class="line">   evt_entry.unit     = 1;</div>
<div class="line">   evt_entry.itf.id   = <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a>;</div>
<div class="line">   evt_entry.itf.role = <a class="code" href="group__common__itf.html#gga4e33516b1110eb20d58eeb686910e391a0828ec0ce7413f540a543ab6fe6793ba">HF::Interface::SERVER_ROLE</a>;</div>
<div class="line">   evt_entry.pack_id  = <a class="code" href="group__attr__packs.html#gga7416e0f463a659369c8e567da16a3598aae5294bb10a7a6792cb25b0e0e2ab35c">HF::Attributes::Pack::DYNAMIC</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is lower that to 5%</span></div>
<div class="line">   Event::Field field (<a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271af02b7f4159991ba8b47612b41d077afb">Event::LT</a>, <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>);</div>
</div><!-- fragment --></p>
<ul>
<li>Value is less that 5%</li>
</ul>
<p><div class="fragment"><div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(5.0f)};  <span class="comment">// 5%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.fields.push_back (field);</div>
</div><!-- fragment --></p>
<ul>
<li>Value is equal to 60%</li>
</ul>
<p><div class="fragment"><div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is equal to 60%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a177366a6f0dcbadb887b855783badec4">Event::EQ</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(60.0f)};  <span class="comment">// 60%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.fields.push_back (field);</div>
</div><!-- fragment --></p>
<ul>
<li>Value is greater that to 85%</li>
</ul>
<p><div class="fragment"><div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is greater that to 85%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a2688ac03e8cc37ea0ba35273b16bad47">Event::HT</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(85.0f)};  <span class="comment">// 85%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.fields.push_back (field);</div>
</div><!-- fragment --></p>
<p>Finally add the entries to the rule on the remote device.</p>
<p><div class="fragment"><div class="line"></div>
<div class="line">   Reference evt_report_ref (<a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda527a7a9787feeac60996883297a97856">HF::Core::AttributeReporting::EVENT</a>, 1);</div>
<div class="line"></div>
<div class="line">   event_entries.push_back (evt_entry);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 1</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, evt_report_ref, event_entries.begin (),</div>
<div class="line">                                              event_entries.end ());</div>
</div><!-- fragment --></p>
<p>For the second rule we have,</p>
<ul>
<li>Value is less that 10%</li>
</ul>
<p><div class="fragment"><div class="line">   <span class="comment">// Create the condition to send a report when level values is lower that to 10%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271af02b7f4159991ba8b47612b41d077afb">Event::LT</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(10.0f)};  <span class="comment">// 10%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.fields.push_back (field);</div>
</div><!-- fragment --></p>
<ul>
<li>Value is equal to 40%</li>
</ul>
<p><div class="fragment"><div class="line"></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a177366a6f0dcbadb887b855783badec4">Event::EQ</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(40.0f)};  <span class="comment">// 40%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.fields.push_back (field);</div>
</div><!-- fragment --></p>
<ul>
<li>Value is greater that to 75%</li>
</ul>
<p><div class="fragment"><div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is greater that to 90%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a2688ac03e8cc37ea0ba35273b16bad47">Event::HT</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(75.0f)};  <span class="comment">// 75%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.fields.push_back (field);</div>
</div><!-- fragment --></p>
<p>Adding the event entries to the rule at the end.</p>
<p><div class="fragment"><div class="line"></div>
<div class="line">   event_entries.push_back (evt_entry);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 2</span></div>
<div class="line">   evt_report_ref.id = 2;</div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, evt_report_ref, event_entries.begin (),</div>
<div class="line">                                              event_entries.end ());</div>
</div><!-- fragment --></p>
<p>Now we can simulate different level changes to see the messages generated by the event entries in the Attribute Reporting service.</p>
<p><div class="fragment"><div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;&gt;&gt;&gt; Simulate node level change &lt;&lt;&lt;&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   addr.unit = 1;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 30 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 30.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 40 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 40.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 50 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 50.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 60 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 60.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 70 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 40.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 80 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 80.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 90 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 90.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 20% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 20.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 15% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 15.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 10% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 10.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to  7% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 7.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to  5% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 5.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to  1% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 1.0f);</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --></p>
<p><b>Full code listing</b></p>
 <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="hanfun_8h.html">hanfun.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">hanfun/debug.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="localloop_8h.html">localloop.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// =============================================================================</span></div>
<div class="line"><span class="comment">// Defines</span></div>
<div class="line"><span class="comment">// =============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/* *INDENT-OFF* */</span></div>
<div class="line"><span class="preprocessor">#define TABLE_LOG(_X)      LOG (INFO) &lt;&lt; std::right &lt;&lt; std::setw (15) &lt;&lt; _X &lt;&lt; std::left &lt;&lt; NL</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define TABLE_STREAM(_X)   stream &lt;&lt; &quot;[INFO ] &quot; &lt;&lt; std::right &lt;&lt; std::setw (15) &lt;&lt; _X &lt;&lt; std::left</span></div>
<div class="line"><span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// =============================================================================</span></div>
<div class="line"><span class="comment">// Implementation</span></div>
<div class="line"><span class="comment">// =============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceHF_1_1Core_1_1AttributeReporting.html">HF::Core::AttributeReporting</a>;</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> Report::Attribute &amp;attr)</div>
<div class="line">{</div>
<div class="line">   stream &lt;&lt; <span class="stringliteral">&quot; (idx) &quot;</span> &lt;&lt; attr-&gt;interface () &lt;&lt; <span class="stringliteral">&quot; (itf) &quot;</span> &lt;&lt; (int) attr-&gt;uid () &lt;&lt; <span class="stringliteral">&quot; (uid)&quot;</span>;</div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic_1_1Entry.html">Report::Periodic::Entry</a> &amp;entry)</div>
<div class="line">{</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;ITF : &quot;</span> &lt;&lt; entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#af6f5b7d7b6df9ff14bdff7b453430186">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#a6b99d6eda5fca8baf579285f974d3e6f">id</a> &lt;&lt; <span class="stringliteral">&quot; (uid) &quot;</span> &lt;&lt; entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#af6f5b7d7b6df9ff14bdff7b453430186">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#aac2bdd1c901a93edcfe073d972bf44c7">role</a> &lt;&lt; <span class="stringliteral">&quot; (role)&quot;</span>) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Unit : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#a04db2f7dfc89d6b46546a96c5600aaf0">unit</a>) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Attributes : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.attributes.size () &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Entry.html">Report::Event::Entry</a> &amp;entry)</div>
<div class="line">{</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;ITF : &quot;</span> &lt;&lt; entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#af6f5b7d7b6df9ff14bdff7b453430186">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#a6b99d6eda5fca8baf579285f974d3e6f">id</a> &lt;&lt; <span class="stringliteral">&quot; (uid) &quot;</span> &lt;&lt; entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#af6f5b7d7b6df9ff14bdff7b453430186">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#aac2bdd1c901a93edcfe073d972bf44c7">role</a> &lt;&lt; <span class="stringliteral">&quot; (role)&quot;</span>) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Unit : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#a04db2f7dfc89d6b46546a96c5600aaf0">unit</a>) &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   TABLE_STREAM (<span class="stringliteral">&quot;Fields : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Entry.html#a392d9e7afa56afde1c8df01ec3267c25">fields</a>.size () &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Field.html">Report::Event::Field</a> &amp;field)</div>
<div class="line">{</div>
<div class="line">   stream &lt;&lt; <span class="stringliteral">&quot; (idx) &quot;</span> &lt;&lt; field.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Field.html#a63e4bf0a10e98b69bb471aa2ae843fe4">type</a> &lt;&lt; <span class="stringliteral">&quot; (type) &quot;</span>;</div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">std::ostream &amp;<a class="code" href="group__common.html#ga2860798e86b108a2e3c9fe3cf414145f">operator &lt;&lt;</a>(std::ostream &amp;stream, <span class="keyword">const</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Abstract.html">Report::Abstract</a> &amp;report)</div>
<div class="line">{</div>
<div class="line">   stream &lt;&lt; (int) report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Reference.html#acf15f84d7d9c0e3f4aa6d9f19f0f573c">id</a> &lt;&lt; <span class="stringliteral">&quot; (id) &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Reference.html#ad3d89e787bdf433599656448d83d7a6f">type</a> &lt;&lt; <span class="stringliteral">&quot; (type) &quot;</span>;</div>
<div class="line">   <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace</span></div>
<div class="line">{</div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Custom attribute reporting client role implementation.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <span class="keyword">struct </span>AttributeReporting:<span class="keyword">public</span> <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1AbstractClient.html">HF::Core::AttributeReporting::AbstractClient</a></div>
<div class="line">   {</div>
<div class="line">      <span class="keywordtype">void</span> report (<a class="code" href="group__attr__reporting__common.html#ga5dee0ba2828750575a162474b07772dd">HF::Core::AttributeReporting::Type</a> type, <span class="keyword">const</span> <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;address,</div>
<div class="line">                   <span class="keyword">const</span> <a class="code" href="structHF_1_1Common_1_1ByteArray.html">HF::Common::ByteArray</a> &amp;payload, uint16_t offset)</div>
<div class="line">      {</div>
<div class="line">         <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (payload);</div>
<div class="line">         <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (offset);</div>
<div class="line"></div>
<div class="line">         <span class="keyword">using namespace </span><a class="code" href="namespaceHF_1_1Core_1_1AttributeReporting.html">HF::Core::AttributeReporting</a>;</div>
<div class="line"></div>
<div class="line">         <span class="keywordflow">switch</span> (type)</div>
<div class="line">         {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda488fa3a02b292a4782f38008f26dc249">PERIODIC</a>:</div>
<div class="line">            {</div>
<div class="line">               <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Received a periodic notification from device : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">               <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html">Report::Periodic</a> report;</div>
<div class="line"></div>
<div class="line">               report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#ac45448b757a46d499b1726d544d69ee7">unpack</a> (<a class="code" href="group__attributes.html#gae271ba996fe0d158397877c944e55862">HF::Attributes::get_factory</a>, payload, offset);</div>
<div class="line"></div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Report : &quot;</span> &lt;&lt; report);</div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Entries : &quot;</span> &lt;&lt; std::distance (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.begin (),</div>
<div class="line">                                                         report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.end ()) &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">               uint8_t unit_count = 0;</div>
<div class="line">               <span class="comment">/* *INDENT-OFF* */</span></div>
<div class="line">               std::for_each (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.begin (), report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic.html#a0b5c8b17b2d73e184c9857d471dda0db">entries</a>.end (),</div>
<div class="line">                     [&amp;unit_count](<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Periodic_1_1Entry.html">Report::Periodic::Entry</a> &amp;entry)</div>
<div class="line">               {</div>
<div class="line">                  TABLE_LOG (<span class="stringliteral">&quot;Entry : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) unit_count++ &lt;&lt; std::endl &lt;&lt; entry);</div>
<div class="line"></div>
<div class="line">                  uint8_t attr_count = 0;</div>
<div class="line">                  std::for_each (entry.attributes.begin (), entry.attributes.end (),</div>
<div class="line">                        [&amp;attr_count](Report::Attribute attr)</div>
<div class="line">                  {</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Attribute : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) attr_count++ &lt;&lt; attr);</div>
<div class="line"></div>
<div class="line">                     <span class="keywordflow">if</span> (attr-&gt;interface () == <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a> &amp;&amp;</div>
<div class="line">                           attr-&gt;uid () == <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>)</div>
<div class="line">                     {</div>
<div class="line">                        <a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *level_attr =</div>
<div class="line">                        (<a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *) attr.get ();</div>
<div class="line">                        <span class="keywordtype">int</span> precent = HF::Common::to_percent &lt;uint8_t&gt;(level_attr-&gt;get ());</div>
<div class="line">                        TABLE_LOG (<span class="stringliteral">&quot;Attr Value : &quot;</span> &lt;&lt; precent &lt;&lt; <span class="stringliteral">&quot;%&quot;</span>);</div>
<div class="line">                     }</div>
<div class="line">                  });</div>
<div class="line">               });</div>
<div class="line">               <span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda527a7a9787feeac60996883297a97856">EVENT</a>:</div>
<div class="line">            {</div>
<div class="line">               <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Received an event notification : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">               <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html">Report::Event</a> report;</div>
<div class="line"></div>
<div class="line">               report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#a4f014654d2ce96c28c3d37330ff36477">unpack</a> (<a class="code" href="group__attributes.html#gae271ba996fe0d158397877c944e55862">HF::Attributes::get_factory</a>, payload, offset);</div>
<div class="line"></div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Report : &quot;</span> &lt;&lt; report);</div>
<div class="line">               TABLE_LOG (<span class="stringliteral">&quot;Entries : &quot;</span> &lt;&lt; std::distance (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.begin (),</div>
<div class="line">                                                         report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.end ()) &lt;&lt; <span class="stringliteral">&quot; (#)&quot;</span>);</div>
<div class="line"></div>
<div class="line">               uint8_t unit_count = 0;</div>
<div class="line">               <span class="comment">/* *INDENT-OFF* */</span></div>
<div class="line">               std::for_each (report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.begin (), report.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event.html#acc9ab251b08dbae5956494fe79df8901">entries</a>.end (),</div>
<div class="line">                     [&amp;unit_count](<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Entry.html">Report::Event::Entry</a> &amp;entry)</div>
<div class="line">               {</div>
<div class="line">                  TABLE_LOG (<span class="stringliteral">&quot;Entry : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) unit_count++ &lt;&lt; std::endl &lt;&lt; entry);</div>
<div class="line"></div>
<div class="line">                  uint8_t field_count = 0;</div>
<div class="line">                  std::for_each (entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Entry.html#a392d9e7afa56afde1c8df01ec3267c25">fields</a>.begin (), entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Entry.html#a392d9e7afa56afde1c8df01ec3267c25">fields</a>.end (),</div>
<div class="line">                        [&amp;field_count](<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Event_1_1Field.html">Report::Event::Field</a> &amp;field)</div>
<div class="line">                  {</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Field : &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) field_count++ &lt;&lt; field);</div>
<div class="line">                     TABLE_LOG (<span class="stringliteral">&quot; Attribute : &quot;</span> &lt;&lt; field.attribute-&gt;interface () &lt;&lt; <span class="stringliteral">&quot; (itf) &quot;</span></div>
<div class="line">                                                &lt;&lt; (int) field.attribute-&gt;uid () &lt;&lt; <span class="stringliteral">&quot; (uid)&quot;</span>);</div>
<div class="line"></div>
<div class="line">                     <span class="keywordflow">if</span> (field.attribute-&gt;interface () == <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a> &amp;&amp;</div>
<div class="line">                           field.attribute-&gt;uid () == <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>)</div>
<div class="line">                     {</div>
<div class="line">                        <a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *level_attr =</div>
<div class="line">                        (<a class="code" href="structHF_1_1Interfaces_1_1LevelControl_1_1Level.html">HF::Interfaces::LevelControl::Level</a> *) field.attribute.get ();</div>
<div class="line">                        <span class="keywordtype">int</span> precent = HF::Common::to_percent &lt;uint8_t&gt;(level_attr-&gt;get ());</div>
<div class="line">                        TABLE_LOG (<span class="stringliteral">&quot;Attr Value : &quot;</span> &lt;&lt; precent &lt;&lt; <span class="stringliteral">&quot;%&quot;</span>);</div>
<div class="line">                     }</div>
<div class="line">                  });</div>
<div class="line">               });</div>
<div class="line">               <span class="comment">/* *INDENT-ON* */</span></div>
<div class="line"></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">         }</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordtype">void</span> created (<span class="keyword">const</span> <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;address,</div>
<div class="line">                    <span class="keyword">const</span> HF::Core::AttributeReporting::Response &amp;response)</div>
<div class="line">      {</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Report rule created on device : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Code : &quot;</span> &lt;&lt; (int) response.code &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Type : &quot;</span> &lt;&lt; (int) response.report.type &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Id   : &quot;</span> &lt;&lt; (int) response.report.id &lt;&lt; NL;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordtype">void</span> added (<span class="keyword">const</span> <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;address,</div>
<div class="line">                  <span class="keyword">const</span> HF::Core::AttributeReporting::Response &amp;response)</div>
<div class="line">      {</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Report rule entries created on device : &quot;</span> &lt;&lt; address.<a class="code" href="structHF_1_1Protocol_1_1Address.html#a1630bceee83f553efd9adf5a8b6a7600">device</a> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Code : &quot;</span> &lt;&lt; (int) response.code &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Type : &quot;</span> &lt;&lt; (int) response.report.type &lt;&lt; NL;</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;  Id   : &quot;</span> &lt;&lt; (int) response.report.id &lt;&lt; NL;</div>
<div class="line">      }</div>
<div class="line">   };</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Unit implementing the Simple %Level Control profile.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <span class="keyword">struct </span>SimpleLevelControl:<span class="keyword">public</span> <a class="code" href="classHF_1_1Units_1_1Unit.html">HF::Units::Unit</a> &lt;HF::Profiles::SimpleLevelControl, AttributeReporting&gt;</div>
<div class="line">   {</div>
<div class="line">      SimpleLevelControl(uint8_t <span class="keywordtype">id</span>, <a class="code" href="structHF_1_1IDevice.html">HF::IDevice</a> &amp;device):</div>
<div class="line">         <a class="code" href="namespaceHF.html">HF</a>::Units::Unit &lt;<a class="code" href="namespaceHF.html">HF</a>::Profiles::SimpleLevelControl, AttributeReporting&gt;(id, device)</div>
<div class="line">      {}</div>
<div class="line"></div>
<div class="line">      AttributeReporting *attribute_reporting ()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">      </span>{</div>
<div class="line">         <span class="keywordflow">return</span> const_cast &lt;AttributeReporting *&gt;(get &lt;0&gt;());</div>
<div class="line">      }</div>
<div class="line">   };</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Unit implementing the Simple Level Controllable profile.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <span class="keyword">struct </span>SimpleLevelControllable:<span class="keyword">public</span> <a class="code" href="classHF_1_1Units_1_1Unit.html">HF::Units::Unit</a> &lt;HF::Profiles::SimpleLevelControllable&gt;</div>
<div class="line">   {</div>
<div class="line">      <span class="keyword">typedef</span> <a class="code" href="classHF_1_1Units_1_1Unit.html">HF::Units::Unit &lt;HF::Profiles::SimpleLevelControllable&gt;</a> _Parent;</div>
<div class="line"></div>
<div class="line">      SimpleLevelControllable(uint8_t <span class="keywordtype">id</span>, <a class="code" href="structHF_1_1IDevice.html">HF::IDevice</a> &amp;device):</div>
<div class="line">         _Parent (id, device)</div>
<div class="line">      {}</div>
<div class="line"></div>
<div class="line">      <span class="keywordtype">void</span> level_change (<a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> &amp;source, uint8_t old_level, uint8_t new_level)</div>
<div class="line">      {</div>
<div class="line">         _Parent::level_change (source, old_level, new_level);</div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Level Change : &quot;</span></div>
<div class="line">                    &lt;&lt; (int) <a class="code" href="group__common.html#ga48196ead67669d489f7a8a6559b8b15a">HF::Common::to_percent</a> (old_level)</div>
<div class="line">                    &lt;&lt; <span class="stringliteral">&quot;\% -&gt; &quot;</span></div>
<div class="line">                    &lt;&lt; (int) <a class="code" href="group__common.html#ga48196ead67669d489f7a8a6559b8b15a">HF::Common::to_percent</a> (new_level)</div>
<div class="line">                    &lt;&lt; <span class="stringliteral">&quot;\%&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">      }</div>
<div class="line">   };</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Example node.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <span class="keyword">struct </span><a class="code" href="structNode.html">Node</a>:<span class="keyword">public</span> <a class="code" href="classHF_1_1Devices_1_1Node_1_1Abstract.html">HF::Devices::Node::Node</a></div>
<div class="line">   {};</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Example concentrator.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <span class="keyword">struct </span>Base:<span class="keyword">public</span> <a class="code" href="classHF_1_1Devices_1_1Concentrator_1_1Abstract.html">HF::Devices::Concentrator::Concentrator</a></div>
<div class="line">   {};</div>
<div class="line"></div>
<div class="line">}  <span class="comment">// namespace</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// =============================================================================</span></div>
<div class="line"><span class="comment">// MAIN</span></div>
<div class="line"><span class="comment">// =============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (argc);</div>
<div class="line">   <a class="code" href="group__common.html#ga86d500a34c624c2cae56bc25a31b12f3">UNUSED</a> (argv);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Use case : Level Control interface usage&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Each node variable is a remote device, i.e.,</span></div>
<div class="line"><span class="comment">    * the Node variables are declared on the remote device</span></div>
<div class="line"><span class="comment">    * code and are not used on the base code.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Create the node instances ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   Node node1;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Add unit to node1 instance ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   SimpleLevelControl level_control (1, node1);</div>
<div class="line"></div>
<div class="line">   Node node2;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Add unit to node2 instance ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   SimpleLevelControllable level_controllable (1, node2);</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * This instance represents the base application.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Create the base instance ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   <a class="code" href="structBase.html">Base</a> base;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Create transport instance&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   Localloop loop;</div>
<div class="line"></div>
<div class="line">   <span class="comment">/*</span></div>
<div class="line"><span class="comment">    * Setup the network.</span></div>
<div class="line"><span class="comment">    *</span></div>
<div class="line"><span class="comment">    * This simulates the devices connecting to the base using for</span></div>
<div class="line"><span class="comment">    * example a TCP/IP connection or a DECT ULE PVC.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Network setup ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   loop.set_base (&amp;base);</div>
<div class="line">   loop.add_node (&amp;node1, <span class="stringliteral">&quot;node_1&quot;</span>);</div>
<div class="line">   loop.add_node (&amp;node2, <span class="stringliteral">&quot;node_2&quot;</span>);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Register the two devices.</span></div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 1 is unregistered.</span></div>
<div class="line">   assert (node1.address () == <a class="code" href="group__protocol.html#ga23f7a5fde66435071c5d332e9d3dbf0f">HF::Protocol::BROADCAST_ADDR</a>);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Registering node1 ... &quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   node1.unit0 ()-&gt;device_management ()-&gt;register_device ();</div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Node1 address ... &quot;</span> &lt;&lt; node1.address () &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 1 is registered</span></div>
<div class="line">   assert (node1.address () == 1);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 2 is unregistered.</span></div>
<div class="line">   assert (node2.address () == <a class="code" href="group__protocol.html#ga23f7a5fde66435071c5d332e9d3dbf0f">HF::Protocol::BROADCAST_ADDR</a>);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Registering node2 ... &quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   node2.unit0 ()-&gt;device_management ()-&gt;register_device ();</div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Node2 address ... &quot;</span> &lt;&lt; node2.address () &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Node 2 is registered</span></div>
<div class="line">   assert (node2.address () == 2);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;There should be two registered devices ... &quot;</span></div>
<div class="line">              &lt;&lt; base.unit0 ()-&gt;device_management ()-&gt;entries ().size () &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   assert (base.unit0 ()-&gt;device_management ()-&gt;entries ().size () == 2);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Set initial level value ... 15\%&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_controllable.level (15.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> addr (2, 0);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// =============================================================================</span></div>
<div class="line">   <span class="comment">// Periodic Notification</span></div>
<div class="line">   <span class="comment">// =============================================================================</span></div>
<div class="line"></div>
<div class="line">   <span class="keyword">using namespace </span><a class="code" href="namespaceHF_1_1Core_1_1AttributeReporting.html">HF::Core::AttributeReporting</a>;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;====== Periodic Notifications ======&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create a periodic rule.</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;create (addr, 6);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create another periodic rule.</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;create (addr, 15);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the rule entries.</span></div>
<div class="line">   std::vector &lt;Periodic::Entry&gt; periodic_entries (1);</div>
<div class="line"></div>
<div class="line">   <span class="keyword">auto</span> &amp;entry = periodic_entries.front ();</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create an entry to receive all mandatory attributes.</span></div>
<div class="line">   entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#a04db2f7dfc89d6b46546a96c5600aaf0">unit</a>     = 1;</div>
<div class="line">   entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#af6f5b7d7b6df9ff14bdff7b453430186">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#a6b99d6eda5fca8baf579285f974d3e6f">id</a>   = <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a>;</div>
<div class="line">   entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Report_1_1Entry.html#af6f5b7d7b6df9ff14bdff7b453430186">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#aac2bdd1c901a93edcfe073d972bf44c7">role</a> = <a class="code" href="group__common__itf.html#gga4e33516b1110eb20d58eeb686910e391a0828ec0ce7413f540a543ab6fe6793ba">HF::Interface::SERVER_ROLE</a>;</div>
<div class="line">   entry.pack_id  = <a class="code" href="group__attr__packs.html#gga7416e0f463a659369c8e567da16a3598aa981953e69372a802cf9dfe12b492627">HF::Attributes::Pack::MANDATORY</a>;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Reference.html">Reference</a> report_ref (<a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda488fa3a02b292a4782f38008f26dc249">PERIODIC</a>, 1);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 1</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, report_ref, periodic_entries.begin (),</div>
<div class="line">                                              periodic_entries.end ());</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 2</span></div>
<div class="line">   report_ref.id = 2;</div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, report_ref, periodic_entries.begin (),</div>
<div class="line">                                              periodic_entries.end ());</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Simulate remote device HAN-FUN periodic processing.</span></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;&gt;&gt;&gt; Simulate node periodic processing &lt;&lt;&lt;&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> time = 0; time &lt; 35; time++)</div>
<div class="line">   {</div>
<div class="line">      <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Time : &quot;</span> &lt;&lt; time &lt;&lt; <span class="stringliteral">&quot;s&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">      node2.periodic (time);</div>
<div class="line"></div>
<div class="line">      <span class="comment">// At these times the level changes.</span></div>
<div class="line">      <span class="keywordflow">if</span> (time == 10)</div>
<div class="line">      {</div>
<div class="line">         <span class="comment">// Another node changes the value.</span></div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Level changes to 25 % by an another node.&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         <a class="code" href="structHF_1_1Protocol_1_1Address.html">HF::Protocol::Address</a> addr (node2.address (), 1);</div>
<div class="line">         level_control.level (addr, 25.0f);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (time == 25)</div>
<div class="line">      {</div>
<div class="line">         <span class="comment">// The value is changed on the actual node.</span></div>
<div class="line">         <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Level changes to 55 % on the actual node.&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">         level_controllable.level (55.0f);</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line">   <span class="comment">// =============================================================================</span></div>
<div class="line">   <span class="comment">// Event Notification</span></div>
<div class="line">   <span class="comment">// =============================================================================</span></div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;====== Event Notifications ======&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;Set initial level value ... 15\%&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_controllable.level (15.0f);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create a periodic rule.</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;create (addr);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create another periodic rule.</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;create (addr);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the rule entries.</span></div>
<div class="line">   std::vector &lt;Event::Entry&gt; event_entries;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html">Event::Entry</a> evt_entry;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create an entry to receive changes on .</span></div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Entry.html#a08c2115d32126243c344c9291269d241">unit</a>     = 1;</div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Entry.html#ac8325d66cfb00fff8a68b347fd8401a9">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#a6b99d6eda5fca8baf579285f974d3e6f">id</a>   = <a class="code" href="group__common__itf.html#ggaa56692f4035b4541ea47538adfda3052a35c81a1ba262bd4d43d5d35614a6d71b">HF::Interface::LEVEL_CONTROL</a>;</div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Entry.html#ac8325d66cfb00fff8a68b347fd8401a9">itf</a>.<a class="code" href="structHF_1_1Common_1_1Interface.html#aac2bdd1c901a93edcfe073d972bf44c7">role</a> = <a class="code" href="group__common__itf.html#gga4e33516b1110eb20d58eeb686910e391a0828ec0ce7413f540a543ab6fe6793ba">HF::Interface::SERVER_ROLE</a>;</div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Entry.html#adbe992e353fe2ef90457913d655c5ec8">pack_id</a>  = <a class="code" href="group__attr__packs.html#gga7416e0f463a659369c8e567da16a3598aae5294bb10a7a6792cb25b0e0e2ab35c">HF::Attributes::Pack::DYNAMIC</a>;</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is lower that to 5%</span></div>
<div class="line">   <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Field.html">Event::Field</a> field (<a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271af02b7f4159991ba8b47612b41d077afb">Event::LT</a>, <a class="code" href="group__level__ctl__itf.html#ggafc5c75faf837f56d818efe9e771ef640af91925852e447a744a09f13cd1a4325f">HF::Interfaces::LevelControl::LEVEL_ATTR</a>);</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(5.0f)};  <span class="comment">// 5%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html#a2edfaa8198be603f1c46bbbe2e1d6b55">fields</a>.push_back (field);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is equal to 60%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a177366a6f0dcbadb887b855783badec4">Event::EQ</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(60.0f)};  <span class="comment">// 60%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html#a2edfaa8198be603f1c46bbbe2e1d6b55">fields</a>.push_back (field);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is greater that to 85%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a2688ac03e8cc37ea0ba35273b16bad47">Event::HT</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(85.0f)};  <span class="comment">// 85%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html#a2edfaa8198be603f1c46bbbe2e1d6b55">fields</a>.push_back (field);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Reference.html">Reference</a> evt_report_ref (<a class="code" href="group__attr__reporting__common.html#gga5dee0ba2828750575a162474b07772dda527a7a9787feeac60996883297a97856">HF::Core::AttributeReporting::EVENT</a>, 1);</div>
<div class="line"></div>
<div class="line">   event_entries.push_back (evt_entry);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 1</span></div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, evt_report_ref, event_entries.begin (),</div>
<div class="line">                                              event_entries.end ());</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create another set of rules in second rule.</span></div>
<div class="line">   event_entries.clear ();</div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html#a2edfaa8198be603f1c46bbbe2e1d6b55">fields</a>.clear ();</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is lower that to 10%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271af02b7f4159991ba8b47612b41d077afb">Event::LT</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(10.0f)};  <span class="comment">// 10%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html#a2edfaa8198be603f1c46bbbe2e1d6b55">fields</a>.push_back (field);</div>
<div class="line"></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a177366a6f0dcbadb887b855783badec4">Event::EQ</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(40.0f)};  <span class="comment">// 40%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html#a2edfaa8198be603f1c46bbbe2e1d6b55">fields</a>.push_back (field);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Create the condition to send a report when level values is greater that to 90%</span></div>
<div class="line">   field.type  = <a class="code" href="group__attr__report__event.html#gga8f186986fc0f96df6fae13a01c95b271a2688ac03e8cc37ea0ba35273b16bad47">Event::HT</a>;</div>
<div class="line">   field.value = {HF::Common::from_percent &lt;uint8_t&gt;(75.0f)};  <span class="comment">// 75%;</span></div>
<div class="line"></div>
<div class="line">   evt_entry.<a class="code" href="structHF_1_1Core_1_1AttributeReporting_1_1Event_1_1Entry.html#a2edfaa8198be603f1c46bbbe2e1d6b55">fields</a>.push_back (field);</div>
<div class="line"></div>
<div class="line">   event_entries.push_back (evt_entry);</div>
<div class="line"></div>
<div class="line">   <span class="comment">// Add entries to rule 2</span></div>
<div class="line">   evt_report_ref.id = 2;</div>
<div class="line">   level_control.attribute_reporting ()-&gt;add (addr, evt_report_ref, event_entries.begin (),</div>
<div class="line">                                              event_entries.end ());</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;&gt;&gt;&gt; Simulate node level change &lt;&lt;&lt;&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line"></div>
<div class="line">   addr.unit = 1;</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 30 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 30.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 40 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 40.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 50 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 50.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 60 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 60.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 70 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 40.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 80 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 80.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 90 % ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 90.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 20% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 20.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 15% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 15.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to 10% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 10.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to  7% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 7.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to  5% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 5.0f);</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__debug.html#gadadcbb9e426e1bf6bd7ac06dac7f958b">LOG</a> (INFO) &lt;&lt; <span class="stringliteral">&quot;== Change level to  1% ...&quot;</span> &lt;&lt; <a class="code" href="group__debug.html#ga4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;</div>
<div class="line">   level_control.level (addr, 1.0f);</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="tutorials.html">Getting Started</a></li>
    <li class="footer">Generated on Thu Jan 22 2015 17:01:40 for HAN-FUN API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
